CREATE TABLE "Bank" (
  id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  "name" VARCHAR(255) NOT NULL,
  CONSTRAINT PK_BANK PRIMARY KEY (id)
);

ALTER TABLE "Bank" ADD CONSTRAINT UC_BANK_NAME UNIQUE ("name");

CREATE TABLE "Client" (
  id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  "first_name" VARCHAR(255) NOT NULL,
  "last_name" VARCHAR(255) NOT NULL,
  "patronymic" VARCHAR(255),
  "phone_number" VARCHAR(255),
  "email" VARCHAR(255),
  "passport_data" VARCHAR(255) NOT NULL,
  CONSTRAINT PK_CLIENT PRIMARY KEY (id)
);

CREATE TABLE "Credit" (
  id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  "title" VARCHAR(255) NOT NULL,
  "interest_rate" DOUBLE NOT NULL,
  "limit_sum" DOUBLE NOT NULL,
  "term" INT NOT NULL,
  "bank_id" INT,
  CONSTRAINT PK_CREDIT PRIMARY KEY (id)
);

ALTER TABLE "Credit" ADD CONSTRAINT FK_CREDIT_ON_BANK FOREIGN KEY ("bank_id") REFERENCES "Bank" (id);

CREATE TABLE "Credit_Offer" (
  id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  "start_date" TIMESTAMP NOT NULL,
  "sum_value" DOUBLE NOT NULL,
  "an_initial_fee" DOUBLE,
  "credits_id" INT NOT NULL,
  "clients_id" INT NOT NULL,
  CONSTRAINT PK_CREDIT_OFFER PRIMARY KEY (id)
);

ALTER TABLE "Credit_Offer" ADD CONSTRAINT FK_CREDIT_OFFER_ON_CLIENTS FOREIGN KEY ("clients_id") REFERENCES "Client" (id);

ALTER TABLE "Credit_Offer" ADD CONSTRAINT FK_CREDIT_OFFER_ON_CREDITS FOREIGN KEY ("credits_id") REFERENCES "Credit" (id);

CREATE TABLE "Payment" (
  id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  "start_date" TIMESTAMP NOT NULL,
  "payment" DOUBLE NOT NULL,
  "percent" DOUBLE NOT NULL,
  "capital" DOUBLE NOT NULL,
  "residue" DOUBLE NOT NULL,
  "credit_offer_id" INT NOT NULL,
  CONSTRAINT PK_PAYMENT PRIMARY KEY (id)
);

ALTER TABLE "Payment" ADD CONSTRAINT FK_PAYMENT_ON_CREDITOFFER FOREIGN KEY ("credit_offer_id") REFERENCES "Credit_Offer" (id);